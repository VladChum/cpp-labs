//---------------------------------------------------------------------------

#ifndef LR4H
#define LR4H
//---------------------------------------------------------------------------
//структура для элемента стека операций
struct Node_op
{
  char c;
  Node_op* p;
};

//структура для элемента стека чисел
struct Node_num
{
  float c;
  Node_num* p;
};
//перечисление для контроля ошибок при вводе
typedef enum
{
  all_true=1,
  bad_operands,
  few_brackets,
  much_brackets,
  few_operands,
  few_operators
}errors;

class Stack
{
public:
  char* s; //исходная строка
  char* sv; //вспомогательная строка
  Node_op* t1; //указатель на вершину стека операций
  Node_num* t2; //указатель на вершину стека чисел
  void Stack_init(); //задание параметров объекта класса
  void check(); //проверка корректности введенного выражения
  void bspaces(); //расстановка пробелов в строке
  void postfix(); //преобразование в постфиксную запись
  float calc(); //вычисление выражения в постфиксной записи
  void out_err_code(); //вывод сообщения
  errors err_code; //код ошибки
  ~Stack(); //деструктор класса
private:
  int prioritet_stack();//определение приоритета оператора на вершине стека
  bool operand_true(char c); //проверка корректности операнда
  void first1(char c); //создание стека операций
  void push1(char c); //добавление в стек операций
  char pop1(); //выталкивание из стека операций
  void first2(float c); //создание стека чисел
  void push2(float c); //добавление в стек чисел
  float pop2(); //выталкивание из стека чисел
};
#endif
